{"ast":null,"code":"var _s = $RefreshSig$();\n// hooks/useGoogleMap.js\nimport { useEffect, useRef, useState } from 'react';\nexport const useGoogleMap = searchLocation => {\n  _s();\n  const mapRef = useRef(null);\n  const markersRef = useRef([]);\n  const [restaurants, setRestaurants] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const clearMarkers = () => {\n    if (markersRef.current) {\n      markersRef.current.forEach(marker => marker.setMap(null));\n      markersRef.current = [];\n    }\n  };\n  useEffect(() => {\n    return clearMarkers;\n  }, []);\n  const initMap = async () => {\n    try {\n      var _searchLocation$coord, _searchLocation$coord2;\n      clearMarkers();\n      if (!(searchLocation !== null && searchLocation !== void 0 && (_searchLocation$coord = searchLocation.coordinates) !== null && _searchLocation$coord !== void 0 && _searchLocation$coord.lat) || !(searchLocation !== null && searchLocation !== void 0 && (_searchLocation$coord2 = searchLocation.coordinates) !== null && _searchLocation$coord2 !== void 0 && _searchLocation$coord2.lng)) {\n        throw new Error(\"Invalid location coordinates\");\n      }\n      const coordinates = new window.google.maps.LatLng(searchLocation.coordinates.lat, searchLocation.coordinates.lng);\n      mapRef.current = new window.google.maps.Map(document.getElementById(\"map\"), {\n        center: coordinates,\n        zoom: 14,\n        mapId: \"3d323ae4d3f413fd\"\n      });\n      const service = new window.google.maps.places.PlacesService(mapRef.current);\n      const results = await new Promise((resolve, reject) => {\n        service.nearbySearch({\n          location: coordinates,\n          radius: 5000,\n          type: [\"restaurant\"],\n          rankBy: window.google.maps.places.RankBy.RATING\n        }, (results, status) => {\n          if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n            resolve(results);\n          } else {\n            reject(new Error(`Places API error: ${status}`));\n          }\n        });\n      });\n      results.forEach(restaurant => {\n        var _restaurant$geometry;\n        if ((_restaurant$geometry = restaurant.geometry) !== null && _restaurant$geometry !== void 0 && _restaurant$geometry.location) {\n          const marker = new window.google.maps.marker.AdvancedMarkerElement({\n            position: restaurant.geometry.location,\n            map: mapRef.current,\n            title: restaurant.name\n          });\n          const infowindow = new window.google.maps.InfoWindow({\n            content: `<div>\n                            <h3>${restaurant.name}</h3>\n                            <p>${restaurant.vicinity}</p>\n                            <p>${restaurant.rating ? `${restaurant.rating} ⭐` : \"No rating\"}</p>\n                        </div>`\n          });\n          marker.addListener(\"click\", () => infowindow.open(mapRef.current, marker));\n          markersRef.current.push(marker);\n        }\n      });\n      setRestaurants(results);\n      setLoading(false);\n      setError(null);\n    } catch (err) {\n      console.error(\"Error initializing map:\", err);\n      setError(err.message || \"An unexpected error occurred\");\n      setLoading(false);\n    }\n  };\n  return {\n    restaurants,\n    loading,\n    error,\n    initMap\n  };\n};\n_s(useGoogleMap, \"8qZrKYCcrI0SurgVekxxvYE2XMI=\");","map":{"version":3,"names":["useEffect","useRef","useState","useGoogleMap","searchLocation","_s","mapRef","markersRef","restaurants","setRestaurants","loading","setLoading","error","setError","clearMarkers","current","forEach","marker","setMap","initMap","_searchLocation$coord","_searchLocation$coord2","coordinates","lat","lng","Error","window","google","maps","LatLng","Map","document","getElementById","center","zoom","mapId","service","places","PlacesService","results","Promise","resolve","reject","nearbySearch","location","radius","type","rankBy","RankBy","RATING","status","PlacesServiceStatus","OK","restaurant","_restaurant$geometry","geometry","AdvancedMarkerElement","position","map","title","name","infowindow","InfoWindow","content","vicinity","rating","addListener","open","push","err","console","message"],"sources":["/Users/parthsoni/Desktop/dishwise/client/src/hooks/useGoogleMaps.js"],"sourcesContent":["// hooks/useGoogleMap.js\nimport { useEffect, useRef, useState } from 'react';\n\nexport const useGoogleMap = (searchLocation) => {\n    const mapRef = useRef(null);\n    const markersRef = useRef([]);\n    const [restaurants, setRestaurants] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    const clearMarkers = () => {\n        if (markersRef.current) {\n            markersRef.current.forEach(marker => marker.setMap(null));\n            markersRef.current = [];\n        }\n    };\n\n    useEffect(() => {\n        return clearMarkers;\n    }, []);\n\n    const initMap = async () => {\n        try {\n            clearMarkers();\n            \n            if (!searchLocation?.coordinates?.lat || !searchLocation?.coordinates?.lng) {\n                throw new Error(\"Invalid location coordinates\");\n            }\n\n            const coordinates = new window.google.maps.LatLng(\n                searchLocation.coordinates.lat,\n                searchLocation.coordinates.lng\n            );\n\n            mapRef.current = new window.google.maps.Map(document.getElementById(\"map\"), {\n                center: coordinates,\n                zoom: 14,\n                mapId: \"3d323ae4d3f413fd\"\n            });\n\n            const service = new window.google.maps.places.PlacesService(mapRef.current);\n\n            const results = await new Promise((resolve, reject) => {\n                service.nearbySearch({\n                    location: coordinates,\n                    radius: 5000,\n                    type: [\"restaurant\"],\n                    rankBy: window.google.maps.places.RankBy.RATING\n                }, (results, status) => {\n                    if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n                        resolve(results);\n                    } else {\n                        reject(new Error(`Places API error: ${status}`));\n                    }\n                });\n            });\n\n            results.forEach((restaurant) => {\n                if (restaurant.geometry?.location) {\n                    const marker = new window.google.maps.marker.AdvancedMarkerElement({\n                        position: restaurant.geometry.location,\n                        map: mapRef.current,\n                        title: restaurant.name,\n                    });\n\n                    const infowindow = new window.google.maps.InfoWindow({\n                        content: `<div>\n                            <h3>${restaurant.name}</h3>\n                            <p>${restaurant.vicinity}</p>\n                            <p>${restaurant.rating ? `${restaurant.rating} ⭐` : \"No rating\"}</p>\n                        </div>`,\n                    });\n\n                    marker.addListener(\"click\", () => infowindow.open(mapRef.current, marker));\n                    markersRef.current.push(marker);\n                }\n            });\n\n            setRestaurants(results);\n            setLoading(false);\n            setError(null);\n        } catch (err) {\n            console.error(\"Error initializing map:\", err);\n            setError(err.message || \"An unexpected error occurred\");\n            setLoading(false);\n        }\n    };\n\n    return { restaurants, loading, error, initMap };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}